<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}SPL Inventory{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Cairo", sans-serif;
            background: #f7f8fa;
        }

        /* ====== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ====== */
        .navbar {
            background: #0d6efd;
            color: #fff;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar .brand {
            font-size: 20px;
            font-weight: bold;
        }

        .navbar-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .navbar-links a {
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
        }

        .burger {
            display: none;
            cursor: pointer;
            font-size: 26px;
        }

        .mobile-menu {
            display: none;
            background: #0d6efd;
            padding: 15px;
        }

        .mobile-menu a {
            display: block;
            padding: 8px 0;
            color: white;
            text-decoration: none;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        @media(max-width: 768px) {
            .navbar-links { display: none; }
            .burger { display: block; }
        }

        .content {
            padding: 20px;
        }
    </style>
</head>

<body>

<!-- ====== Ø§Ù„Ù‡ÙŠØ¯Ø± ====== -->
<nav class="navbar">
    <div class="brand">ğŸ“¦ SPL - Ù†Ø¸Ø§Ù… Ø¬Ø±Ø¯ Ø§Ù„Ø£ØµÙˆÙ„</div>

    <!-- ğŸ”” Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
    {% if user.is_superuser or "admins" in user_groups or "supervisors" in user_groups %}
        <a href="{% url 'reports_app:pending_sessions' %}" style="color:white; font-size:22px; position:relative; margin-left:15px;">

            ğŸ””
            {% if pending_count > 0 %}
            <span style="
                position:absolute;
                top:-6px;
                right:-10px;
                background:red;
                color:white;
                padding:2px 6px;
                border-radius:50%;
                font-size:11px;
            ">
                {{ pending_count }}
            </span>
            {% endif %}
        </a>
    {% endif %}

    <!-- Ø±ÙˆØ§Ø¨Ø· Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ -->
<div class="navbar-links">

    <a href="/">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

    {% if user.is_superuser or "admins" in user_groups or "supervisors" in user_groups %}
        <a href="/reports/">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
    {% endif %}

    {% if user.is_authenticated %}

        {% if user.is_superuser or "admins" in user_groups %}
            <a href="/inventory/admin/dashboard/">âš™ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</a>

            <!-- Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ + Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ù„Ù„Ø§Ø¯Ù…Ù† ÙÙ‚Ø· -->
            <a href="/import/">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</a>
            <a href="/import/logs/">ğŸ“Š Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯</a>
        {% endif %}

        {% if "supervisors" in user_groups %}
            <a href="/inventory/supervisor/sessions/">ğŸ—‚ï¸ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</a>
        {% endif %}

        {% if "employees" in user_groups %}
            <a href="/inventory/sessions/">ğŸ“‹ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</a>
        {% endif %}

        <span style="color: #ffea00; font-weight: bold;">
            ğŸ‘¤ {{ user.username }}
        </span>

        <a href="/accounts/logout/">ğŸ“¤ Ø®Ø±ÙˆØ¬</a>

    {% else %}
        <a href="/accounts/login/">ğŸ” Ø¯Ø®ÙˆÙ„</a>
    {% endif %}
</div>

<div class="burger" onclick="toggleMenu()">â˜°</div>
</nav>

<!-- ====== Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‡Ø§ØªÙ ====== -->
<div id="mobileMenu" class="mobile-menu">

    <a href="/">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

    {% if user.is_superuser or "admins" in user_groups or "supervisors" in user_groups %}
        <a href="/reports/">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
    {% endif %}

    {% if user.is_authenticated %}

        {% if user.is_superuser or "admins" in user_groups %}
            <a href="/inventory/admin/dashboard/">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… </a>

            <!-- Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ + Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ù„Ù„Ø§Ø¯Ù…Ù† ÙÙ‚Ø· -->
            <a href="/import/">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</a>
            <a href="/import/logs/">ğŸ“Š Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯</a>
        {% endif %}

        {% if "supervisors" in user_groups %}
            <a href="/inventory/supervisor/sessions/">ğŸ—‚ï¸ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</a>
        {% endif %}

        {% if "employees" in user_groups %}
            <a href="/inventory/sessions/">ğŸ“‹ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</a>
        {% endif %}

        <a href="/accounts/profile/">ğŸ‘¤ {{ user.username }}</a>
        <a href="/accounts/logout/">ğŸ“¤ Ø®Ø±ÙˆØ¬</a>

    {% else %}
        <a href="/accounts/login/">ğŸ” Ø¯Ø®ÙˆÙ„</a>
    {% endif %}
</div>


<script>
function toggleMenu() {
    let menu = document.getElementById("mobileMenu");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
}
</script>

<div class="content">
    {% block content %}{% endblock %}
</div>

</body>
</html>

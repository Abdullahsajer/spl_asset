{% extends 'base.html' %}
{% block title %}Ø¬Ù„Ø³Ø§ØªÙŠ{% endblock %}

{% block content %}

<style>
    .session-list-container {
        max-width: 750px;
        margin: 0 auto;
    }

    .session-card {
        background: #fff;
        padding: 18px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 15px;
        transition: transform .15s;
    }

    .session-card:hover {
        transform: scale(1.015);
    }

    .session-header {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .session-info {
        font-size: 14px;
        color: #444;
        margin-bottom: 6px;
    }

    .status-pill {
        padding: 5px 12px;
        border-radius: 20px;
        color: white;
        font-size: 12px;
        display: inline-block;
        margin-top: 5px;
    }

    .st-draft { background: #6c757d; }
    .st-in_progress { background: #0d6efd; }
    .st-submitted_to_supervisor { background: #ffc107; color:#000; }
    .st-supervisor_rejected { background: #dc3545; }
    .st-supervisor_approved { background: #198754; }
</style>


<h2 style="text-align:center; margin-bottom:25px;">ğŸ“‹ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ</h2>

<div class="session-list-container">

    {% if sessions %}
        {% for s in sessions %}

            <div class="session-card">

                <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ù„Ø³Ø© -->
                <div class="session-header">
                    Ø¬Ù„Ø³Ø© Ø±Ù‚Ù… {{ s.id }}
                </div>

                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
                <div class="session-info"><b>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b> {{ s.region }} - {{ s.city }} - {{ s.building }}</div>
                <div class="session-info"><b>Ø¨Ø¯Ø£Øª:</b> {{ s.start_time|date:"Y-m-d H:i" }}</div>

                {% if s.end_time %}
                <div class="session-info"><b>Ø§Ù†ØªÙ‡Øª:</b> {{ s.end_time|date:"Y-m-d H:i" }}</div>
                {% endif %}

                <!-- Ø§Ù„Ø´Ø§Ø±Ø© -->
                <span class="status-pill st-{{ s.status }}">
                    {% if s.status == 'draft' %} Ù…Ø³ÙˆØ¯Ø©
                    {% elif s.status == 'in_progress' %} Ù‚ÙŠØ¯ Ø§Ù„Ø¬Ø±Ø¯
                    {% elif s.status == 'submitted_to_supervisor' %} Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø´Ø±Ù
                    {% elif s.status == 'supervisor_rejected' %} Ù…Ø±ÙÙˆØ¶Ø© Ù…Ù† Ø§Ù„Ù…Ø´Ø±Ù
                    {% elif s.status == 'supervisor_approved' %} Ù…Ø¹ØªÙ…Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø´Ø±Ù
                    {% endif %}
                </span>

                <br><br>

                <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø© -->

                {% if s.status == "draft" %}
                    <a class="btn btn-warning w-100 mb-2"
                       href="{% url 'inventory_app:live_scan' s.id %}">
                       ğŸ”„ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø¬Ù„Ø³Ø©
                    </a>
                {% endif %}

                {% if s.status == "in_progress" %}
                    <a class="btn btn-primary w-100 mb-2"
                       href="{% url 'inventory_app:live_scan' s.id %}">
                       â–¶ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¬Ø±Ø¯
                    </a>
                {% endif %}

                {% if s.status == "submitted_to_supervisor" %}
                    <button class="btn btn-secondary w-100" disabled>
                        â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø´Ø±Ù
                    </button>
                {% endif %}

                {% if s.status == "supervisor_rejected" %}
                    <a href="{% url 'inventory_app:session_detail' s.id %}"
                       class="btn btn-danger w-100 mb-2">
                       â— Ø¹Ø±Ø¶ Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø±Ø¯
                    </a>
                {% endif %}

                {% if s.status == "supervisor_approved" %}
                    <a class="btn btn-success w-100" disabled>âœ” Ù…Ø¹ØªÙ…Ø¯Ø©</a>
                {% endif %}

            </div>

        {% endfor %}
    {% else %}
        <p style="text-align:center;color:#555;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>
    {% endif %}

</div>

{% endblock %}
